$=jQuery;$(document).ready(function(){var queryParams=[];$('#country-filter input, #dpt-filter input, #type-filter input').change(function(){$('#country-filter input, #dpt-filter input, #type-filter input').prop('disabled','disabled');$('.job-listings').fadeTo('fast',0.3);if($('#country-filter :checkbox:checked').length){var val=[];$('#country-filter :checkbox:checked').each(function(i){val[i]=$(this).val();});queryParams.push("country="+val.join(","));};if($('#dpt-filter :checkbox:checked').length){var val=[];$('#dpt-filter :checkbox:checked').each(function(i){val[i]=$(this).val();});queryParams.push("dpt="+val.join(","));};if($('#type-filter :checkbox:checked').length){var val=[];$('#type-filter :checkbox:checked').each(function(i){val[i]=$(this).val();});queryParams.push("type="+val.join(","));};window.location.href=window.location.pathname+addQuery(queryParams);})
if($('#pager ul').length){$('#pager').hide().parent().parent().append('<a id="loadMoreBtn" class="btn btn-primary btn-large" style="display:block;margin-right:12px" href="javascript:loadMoreJobs()">Show more jobs ...</a>');}})
function addQuery(params){if(!Array.isArray(params)||params.count<1){return "";}
var query="";$.each(params,function(i,v){query+=(i===0?"?":"&")+v;});return query;}
var page=1;function loadMoreJobs(){$('#loadMoreBtn').fadeTo('fast',0.5).css("pointer-events","none");var query=window.location.search;query+=(query===""?"?":"&")+"page="+page;if(!query.match(/baseurl\=.+/i)){query+=(query===""?"?":"&")+"baseurl="+window.location.pathname;}
$.getJSON("/rest/taleo/list/"+query,function(json){$('div.job-listings').append(json.nodes.join(""));if(parseInt(json.page)*parseInt(json.per_page)+parseInt(json.per_page)<parseInt(json.total)){$('#loadMoreBtn').fadeTo('fast',1).css("pointer-events","auto")
page++;}
else{$('#loadMoreBtn').hide();}});};